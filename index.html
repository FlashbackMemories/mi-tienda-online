<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tienda de Agendas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }

    header {
      background-color: #333;
      color: white;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    nav ul {
      display: flex;
      list-style: none;
      margin: 0;
      padding: 0;
    }

    nav ul li {
      margin: 0 10px;
    }

    nav ul li a {
      color: white;
      text-decoration: none;
    }

    .hamburger {
      display: none;
      cursor: pointer;
      font-size: 24px;
    }

    @media (max-width: 768px) {
      nav ul {
        display: none;
        flex-direction: column;
        background: #333;
        position: absolute;
        top: 50px;
        right: 10px;
        width: 200px;
      }
      nav ul.active {
        display: flex;
      }
      .hamburger {
        display: block;
      }
    }

    section {
      padding: 20px;
      max-width: 900px;
      margin: auto;
    }

    .custom-agenda label {
      display: block;
      margin: 10px 0 5px;
    }

    .custom-agenda select, 
    .custom-agenda input[type="checkbox"],
    .custom-agenda button {
      margin-bottom: 10px;
    }

    .preview {
      margin-top: 15px;
    }

    .preview img {
      width: 200px;
      height: auto;
      display: block;
      margin-bottom: 5px;
    }

    #cart {
      background: white;
      padding: 15px;
      margin-top: 20px;
      border-radius: 5px;
    }

    #cart-items li {
      margin-bottom: 10px;
    }

    button {
      padding: 8px 12px;
      background: #333;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 3px;
    }

    button:hover {
      background: #555;
    }

    /* --- ALERTA ANIMADA --- */
    #alerta-diaria {
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
      color: red;
      font-weight: bold;
      margin-bottom: 10px;
      height: 0;
      overflow: hidden;
    }

    #alerta-diaria.visible {
      opacity: 1;
      height: auto;
    }

    footer {
      background: #333;
      color: white;
      text-align: center;
      padding: 10px;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<header>
  <h1>Tienda de Agendas</h1>
  <span class="hamburger" onclick="toggleMenu()">&#9776;</span>
  <nav>
    <ul id="nav-links">
      <li><a href="#agenda">Personalizar Agenda</a></li>
      <li><a href="#cart">Carrito</a></li>
      <li><a href="#contacto">Contacto</a></li>
    </ul>
  </nav>
</header>

<!-- AGENDA PERSONALIZABLE -->
<section id="agenda">
  <h2>Crea tu propia agenda</h2>
  <form class="custom-agenda" onsubmit="createAgenda(event)">
    <label>Sistema:
      <select id="sistema" onchange="updatePreview()">
        <option value="Discos">Discos</option>
        <option value="Doble alambre">Doble alambre</option>
      </select>
    </label>

    <label>Agenda:
      <select id="tipoAgenda" onchange="updatePreview()">
        <option value="Diaria">Diaria</option>
        <option value="Semanal">Semanal</option>
      </select>
    </label>

    <!-- ALERTA EXTRA SI ES DIARIA -->
    <div id="alerta-diaria">
      ⚠️ ATENCIÓN: Las agendas diarias tienen un costo adicional de $3000.
    </div>

    <label>Horarios:
      <select id="horarios" onchange="updatePreview()">
        <option value="Con">Con</option>
        <option value="Sin">Sin</option>
      </select>
    </label>

    <label>Estilo:
      <select id="estilo" onchange="updatePreview()">
        <option value="Formal">Formal</option>
        <option value="Informal">Informal</option>
      </select>
    </label>

    <label>Color de hojas:
      <select id="colorHojas" onchange="updatePreview()">
        <option value="Blancas">Blancas</option>
        <option value="Bio">Bio</option>
      </select>
    </label>

    <label><input type="checkbox" id="esquineros" onchange="updatePreview()"> Agregar esquineros (+$1000)</label>
    <label><input type="checkbox" id="hojasEstudiante" onchange="updatePreview()"> Agregar hojas estudiante (+$2000)</label>
    <label><input type="checkbox" id="hojasDocente" onchange="updatePreview()"> Agregar hojas docente (+$2000)</label>
    <label><input type="checkbox" id="trackMenstrual" onchange="updatePreview()"> Track período menstrual (+$500)</label>

    <button type="submit">Agregar agenda personalizada al carrito</button>

    <div class="preview" id="agenda-preview">
      <img id="agenda-img" src="https://via.placeholder.com/200x250/cccccc/000000?text=Agenda" alt="Vista previa de la agenda">
      <div id="agenda-desc">Precio base: $20000</div>
    </div>
  </form>
</section>

<!-- CARRITO -->
<section id="cart">
  <h2>Carrito</h2>
  <ul id="cart-items"></ul>
  <p>Total: $<span id="cart-total">0</span></p>
  <button onclick="checkout()">Finalizar Pedido</button>
</section>

<!-- CONTACTO -->
<section id="contacto">
  <h2>Contacto y Finalización de Pedido</h2>
  <form onsubmit="sendOrder(event)">
    <label>Nombre:
      <input type="text" id="nombre" required>
    </label>
    <label>Correo:
      <input type="email" id="correo" required>
    </label>
    <button type="submit">Enviar pedido por WhatsApp</button>
  </form>
</section>

<footer>
  <p>&copy; 2025 Tienda de Agendas</p>
</footer>

<script>
  // --- Menú hamburguesa ---
  function toggleMenu() {
    document.getElementById('nav-links').classList.toggle('active');
  }

  document.addEventListener('click', (e) => {
    const links = document.getElementById('nav-links');
    if (e.target.closest('#nav-links a')) links.classList.remove('active');
  });

  // --- Carrito ---
  let cart = [];

  function addToCart(product, price) {
    cart.push({ product, price });
    renderCart();
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    renderCart();
  }

  function renderCart() {
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    cartItems.innerHTML = '';
    let total = 0;

    cart.forEach((item, index) => {
      const li = document.createElement('li');
      li.textContent = `${item.product} - $${item.price} `;

      if (item.detalles) {
        const detailsDiv = document.createElement('div');
        detailsDiv.style.fontSize = '12px';
        detailsDiv.style.marginTop = '5px';
        detailsDiv.textContent = item.detalles.trim();
        li.appendChild(detailsDiv);
      }

      const removeBtn = document.createElement('button');
      removeBtn.textContent = 'Eliminar';
      removeBtn.style.marginLeft = '10px';
      removeBtn.onclick = () => removeFromCart(index);

      li.appendChild(removeBtn);
      cartItems.appendChild(li);
      total += item.price;
    });

    cartTotal.textContent = total;
  }

  // --- Finalizar compra ---
  function checkout() {
    if (cart.length === 0) { 
      alert('El carrito está vacío.'); 
      return; 
    }

    const total = cart.reduce((sum, item) => sum + item.price, 0);
    alert(`Total de tu compra: $${total}. Ahora completa tus datos para finalizar el pedido.`);

    document.getElementById('contacto').scrollIntoView({ behavior: 'smooth' });
  }

  // --- Agenda Personalizada ---
  function createAgenda(event) {
    event.preventDefault();
    let price = 20000;
    let extras = [];

    const tipoAgenda = document.getElementById('tipoAgenda').value;
    if (tipoAgenda === "Diaria") {
      price += 3000;
    }

    if (document.getElementById('esquineros').checked) {
      price += 1000;
      extras.push("Esquineros (+$1000)");
    }
    if (document.getElementById('hojasEstudiante').checked) {
      price += 2000;
      extras.push("Hojas estudiante (+$2000)");
    }
    if (document.getElementById('hojasDocente').checked) {
      price += 2000;
      extras.push("Hojas docente (+$2000)");
    }
    if (document.getElementById('trackMenstrual').checked) {
      price += 500;
      extras.push("Track menstrual (+$500)");
    }

    const sistema    = document.getElementById('sistema').value;
    const horarios   = document.getElementById('horarios').value;
    const estilo     = document.getElementById('estilo').value;
    const colorHojas = document.getElementById('colorHojas').value;

    const detalles = `
Sistema: ${sistema}
Agenda: ${tipoAgenda}
Horarios: ${horarios}
Estilo: ${estilo}
Color de hojas: ${colorHojas}
Extras: ${extras.length > 0 ? extras.join(", ") : "Ninguno"}
`;

    cart.push({ product: "Agenda Personalizada", price, detalles });

    renderCart();
    alert(`Agenda personalizada agregada al carrito por $${price}`);
  }

  function updatePreview() {
    let price = 20000;
    const tipoAgenda = document.getElementById('tipoAgenda').value;
    const alerta = document.getElementById('alerta-diaria');

    if (tipoAgenda === "Diaria") {
      price += 3000;
      alerta.classList.add('visible');
    } else {
      alerta.classList.remove('visible');
    }

    if (document.getElementById('esquineros').checked)       price += 1000;
    if (document.getElementById('hojasEstudiante').checked)  price += 2000;
    if (document.getElementById('hojasDocente').checked)     price += 2000;
    if (document.getElementById('trackMenstrual').checked)   price += 500;

    document.getElementById('agenda-desc').textContent = `Precio actualizado: $${price}`;
  }

  // --- Enviar pedido por WhatsApp ---
  function sendOrder(event) {
    event.preventDefault();

    if (cart.length === 0) {
      alert('El carrito está vacío.');
      return;
    }

    const nombre = document.getElementById('nombre').value.trim();
    const correo = document.getElementById('correo').value.trim();

    if (!nombre || !correo) {
      alert('Por favor, completá tu nombre y correo.');
      return;
    }

    let detalle = cart.map(item => {
      let base = `- ${item.product}: $${item.price}`;
      if (item.detalles) {
        base += `\n${item.detalles}`;
      }
      return base;
    }).join('\n\n');

    let total = cart.reduce((sum, item) => sum + item.price, 0);

    const mensaje = `Hola!
Quiero confirmar mi pedido:

${detalle}

Total: $${total}

Datos del cliente:
- Nombre: ${nombre}
- Correo: ${correo}`;

    const whatsappNumber = "5492494515397";
    const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(mensaje)}`;

    window.open(url, '_blank');

    cart = [];
    renderCart();
  }

  window.addEventListener('DOMContentLoaded', updatePreview);
</script>
</body>
</html>
